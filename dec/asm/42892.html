<!DOCTYPE html>
<html>
<head>
<title>Trashman: Routine at 42892</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-wide.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-75RERFCHBG"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-75RERFCHBG');
</script>
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="42878.html">42878</a>
</td>
<td class="up">Up: <a href="../maps/all.html#42892">Map</a></td>
<td class="next">
Next: <a href="42977.html">42977</a>
</td>
</tr>
</table>
<div class="description">42892: Routine at A78C</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routine at <a href="42709.html">Player_Name</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="42892"></span>42892</td>
<td class="instruction">LD A,(43914)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<a href="43914.html">Game_Flags</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="42895"></span>42895</td>
<td class="instruction">AND %11110000</td>
<td class="comment-1" rowspan="1">Keep only bits 4-7.</td>
</tr>
<tr>
<td class="address-1"><span id="42897"></span>42897</td>
<td class="instruction">OR %00001000</td>
<td class="comment-1" rowspan="1">Set bit 3.</td>
</tr>
<tr>
<td class="address-1"><span id="42899"></span>42899</td>
<td class="instruction">LD (43914),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> back to <a href="43914.html">Game_Flags</a>.</td>
</tr>
<tr>
<td class="address-2"><span id="42902"></span>42902</td>
<td class="instruction">LD A,0</td>
<td class="comment-1" rowspan="2">Write 0 to <a href="52285.html">52285</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="42904"></span>42904</td>
<td class="instruction">LD (52285),A</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="42907"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="43020.html">43020</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="42907"></span>42907</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="1">Stash <span class="register">HL</span> on the stack.</td>
</tr>
<tr>
<td class="address-1"><span id="42908"></span>42908</td>
<td class="instruction">LD B,10</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=10.</td>
</tr>
<tr>
<td class="address-2"><span id="42910"></span>42910</td>
<td class="instruction">CALL <a href="52124.html">52124</a></td>
<td class="comment-1" rowspan="1">Call <a href="52124.html">52124</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="42913"></span>42913</td>
<td class="instruction">LD HL,52285</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=<a href="52285.html">52285</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="42916"></span>42916</td>
<td class="instruction">LD (HL),0</td>
<td class="comment-1" rowspan="1">Write 0 to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="42918"></span>42918</td>
<td class="instruction">DJNZ <a href="42892.html#42910">42910</a></td>
<td class="comment-1" rowspan="1">Decrease counter by one and loop back to <a href="42892.html#42910">42910</a> until counter is zero.</td>
</tr>
<tr>
<td class="address-1"><span id="42920"></span>42920</td>
<td class="instruction">LD (HL),1</td>
<td class="comment-1" rowspan="1">Write 1 to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="42922"></span>42922</td>
<td class="instruction">LD HL,128</td>
<td class="comment-1" rowspan="2">Write 0128 <span class="register">HL</span> to *<a href="52124.html#52283">52283</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="42925"></span>42925</td>
<td class="instruction">LD (52283),HL</td>
</tr>
<tr>
<td class="address-1"><span id="42928"></span>42928</td>
<td class="instruction">CALL <a href="42695.html">Handler_DebounceSpace</a></td>
<td class="comment-1" rowspan="1">Call <a href="42695.html">Handler_DebounceSpace</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="42931"></span>42931</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="1">Restore <span class="register">HL</span> from the stack.</td>
</tr>
<tr>
<td class="address-1"><span id="42932"></span>42932</td>
<td class="instruction">CALL <a href="46779.html">Handler_Controls</a></td>
<td class="comment-1" rowspan="1">Call <a href="46779.html">Handler_Controls</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="42935"></span>42935</td>
<td class="instruction">LD A,E</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=<span class="register">E</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="42936"></span>42936</td>
<td class="instruction">CP 24</td>
<td class="comment-1" rowspan="2">Jump to <a href="43020.html">43020</a> if <span class="register">A</span> is 24</td>
</tr>
<tr>
<td class="address-1"><span id="42938"></span>42938</td>
<td class="instruction">JR Z,<a href="43020.html">43020</a></td>
</tr>
<tr>
<td class="address-1"><span id="42940"></span>42940</td>
<td class="instruction">CP 8</td>
<td class="comment-1" rowspan="2">Jump to <a href="43020.html#43032">43032</a> if <span class="register">A</span> is 8.</td>
</tr>
<tr>
<td class="address-1"><span id="42942"></span>42942</td>
<td class="instruction">JR Z,<a href="43020.html#43032">43032</a></td>
</tr>
<tr>
<td class="address-1"><span id="42944"></span>42944</td>
<td class="instruction">CP 128</td>
<td class="comment-1" rowspan="2">Jump to <a href="42892.html#42902">42902</a> if <span class="register">A</span> is not 128.</td>
</tr>
<tr>
<td class="address-1"><span id="42946"></span>42946</td>
<td class="instruction">JR NZ,<a href="42892.html#42902">42902</a></td>
</tr>
<tr>
<td class="address-1"><span id="42948"></span>42948</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="1">Stash <span class="register">HL</span> on the stack.</td>
</tr>
<tr>
<td class="address-1"><span id="42949"></span>42949</td>
<td class="instruction">LD HL,64</td>
<td class="comment-1" rowspan="2">Write 0064 to *<a href="52124.html#52283">52283</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="42952"></span>42952</td>
<td class="instruction">LD (52283),HL</td>
</tr>
<tr>
<td class="address-1"><span id="42955"></span>42955</td>
<td class="instruction">LD HL,43914</td>
<td class="comment-1" rowspan="2">Decrease *<a href="43914.html">Game_Flags</a> by one.</td>
</tr>
<tr>
<td class="address-1"><span id="42958"></span>42958</td>
<td class="instruction">DEC (HL)</td>
</tr>
<tr>
<td class="address-1"><span id="42959"></span>42959</td>
<td class="instruction">LD A,7</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=7.</td>
</tr>
<tr>
<td class="address-1"><span id="42961"></span>42961</td>
<td class="instruction">AND (HL)</td>
<td class="comment-1" rowspan="1">Merge the bits from *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="address-1"><span id="42962"></span>42962</td>
<td class="instruction">JR Z,<a href="42892.html#42975">42975</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="42892.html#42975">42975</a> if the result is zero.</td>
</tr>
<tr>
<td class="address-1"><span id="42964"></span>42964</td>
<td class="instruction">CALL <a href="43066.html">43066</a></td>
<td class="comment-1" rowspan="1">Call <a href="43066.html">43066</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="42967"></span>42967</td>
<td class="instruction">CALL <a href="42987.html">Handler_Debounce_Controls</a></td>
<td class="comment-1" rowspan="1">Call <a href="42987.html">Handler_Debounce_Controls</a>.</td>
</tr>
<tr>
<td class="address-1"><span id="42970"></span>42970</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="1">Restore <span class="register">HL</span> from the stack.</td>
</tr>
<tr>
<td class="address-1"><span id="42971"></span>42971</td>
<td class="instruction">INC HL</td>
<td class="comment-1" rowspan="1">Increment <span class="register">HL</span> by one.</td>
</tr>
<tr>
<td class="address-1"><span id="42972"></span>42972</td>
<td class="instruction">HALT</td>
<td class="comment-1" rowspan="1">HALT.</td>
</tr>
<tr>
<td class="address-1"><span id="42973"></span>42973</td>
<td class="instruction">JR <a href="42892.html#42907">42907</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="42892.html#42907">42907</a>.</td>
</tr>
<tr>
<td class="address-2"><span id="42975"></span>42975</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="1">Restore <span class="register">HL</span> from the stack.</td>
</tr>
<tr>
<td class="address-1"><span id="42976"></span>42976</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="42878.html">42878</a>
</td>
<td class="up">Up: <a href="../maps/all.html#42892">Map</a></td>
<td class="next">
Next: <a href="42977.html">42977</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; 1984 New Generation Software; 2023 ArcadeGeek LTD.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 9.0.</div>
<div class="repository">Link to <a href="https://github.com/pobtastic/trashman/">Source code</a>.</div>
<div><a href="../../asm/A78C.html">Switch to hexadecimal</a>.</div>
</footer>
</body>
</html>